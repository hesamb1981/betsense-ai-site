<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BetSense – DataSpine Engine (Demo)</title>

  <!-- استایل مینیمال؛ خودت بعداً می‌تونی از یکی از صفحات فعلی کپی کنی تا دقیقاً شبیه بقیه شود -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background:#050816;
      color:#f9fafb;
      margin:0;
      padding:0;
    }
    .wrapper {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px 16px 48px;
    }
    .badge {
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      font-size:12px;
      background:#111827;
      border:1px solid #4b5563;
      margin-bottom:8px;
    }
    h1 {
      font-size: 28px;
      margin: 0 0 4px;
    }
    h2 {
      margin-top:32px;
      font-size:20px;
    }
    .pill-row {
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin:12px 0 20px;
    }
    .pill {
      padding:6px 12px;
      border-radius:999px;
      font-size:13px;
      border:1px solid #4b5563;
      background:#0b1120;
    }
    .card {
      background:#020617;
      border-radius:16px;
      border:1px solid #1f2937;
      padding:16px;
      margin-top:16px;
    }
    .label {
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:0.05em;
      color:#9ca3af;
      margin-bottom:4px;
    }
    .json-box {
      font-family:"JetBrains Mono","Fira Code",monospace;
      font-size:13px;
      white-space:pre-wrap;
      background:#020617;
      border-radius:12px;
      padding:12px;
      border:1px solid #111827;
      max-height:400px;
      overflow:auto;
    }
    .footer {
      margin-top:32px;
      font-size:12px;
      color:#6b7280;
    }
    .button-row {
      margin-top:12px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    button {
      border-radius:999px;
      border:none;
      padding:8px 14px;
      font-size:13px;
      cursor:pointer;
      background:#4f46e5;
      color:white;
    }
    button.secondary {
      background:#111827;
      color:#e5e7eb;
      border:1px solid #374151;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="badge">BetSense Quantum · Engine #2</div>
    <h1>DataSpine Engine – Demo Console</h1>
    <p>
      Deep spine for global sports data companies.  
      This page shows the <b>Option&nbsp;D demo output</b> returned from the engine.
    </p>

    <div class="pill-row">
      <div class="pill">Target: Data providers & feeds</div>
      <div class="pill">Layered deviation spine</div>
      <div class="pill">Provider-level drift map</div>
      <div class="pill">API-ready JSON</div>
    </div>

    <div class="card">
      <div class="label">Engine output (live demo call)</div>
      <div id="json-output" class="json-box">
        Loading DataSpine demo…
      </div>

      <div class="button-row">
        <button onclick="loadDemo()">Reload demo</button>
        <button class="secondary" onclick="prettyToggle()">Pretty print</button>
      </div>
    </div>

    <div class="card">
      <div class="label">Narrative summary</div>
      <p id="narrative-short">
        <!-- پر می‌شود از API -->
      </p>
    </div>

    <div class="footer">
      Powered by BetSense · DataSpine Engine demo (Option D).  
      All values are synthetic and for demonstration only.
    </div>
  </div>

  <script>
    let pretty = true;

    async function loadDemo() {
      try {
        const res = await fetch("/.netlify/functions/dataspine-demo");
        const data = await res.json();

        const box = document.getElementById("json-output");
        box.textContent = pretty
          ? JSON.stringify(data, null, 2)
          : JSON.stringify(data);

        const short = data?.narrative?.short || "";
        document.getElementById("narrative-short").textContent = short;
      } catch (err) {
        document.getElementById("json-output").textContent =
          "Error loading DataSpine demo.";
      }
    }

    function prettyToggle() {
      pretty = !pretty;
      loadDemo();
    }

    // اولین بار
    loadDemo();
  </script>
</body>
</html>
