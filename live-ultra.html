<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ultra Pro · Live Console – AOIE Engine</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg-main: #020617;
        --bg-card: #020c1f;
        --accent-1: #22d3ee;
        --accent-2: #22c55e;
        --accent-3: #3b82f6;
        --text-main: #e5e7eb;
        --text-muted: #9ca3af;
        --danger: #f97373;
        --radius-xl: 22px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
      }

      body {
        min-height: 100vh;
        background: radial-gradient(circle at top, #020617 0, #000 55%, #020617 100%);
        color: var(--text-main);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px 12px;
      }

      .shell {
        width: 100%;
        max-width: 480px;
      }

      .header-title {
        font-size: 26px;
        font-weight: 700;
        letter-spacing: 0.04em;
        text-align: left;
        margin-bottom: 16px;
      }

      .card {
        background: radial-gradient(circle at top left, #0f172a 0, #020617 52%);
        border-radius: 28px;
        padding: 22px 18px 20px;
        box-shadow: 0 26px 70px rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(148, 163, 184, 0.22);
      }

      .card-header-line {
        display: flex;
        align-items: center;
        margin-bottom: 18px;
      }

      .status-pill {
        display: inline-flex;
        align-items: center;
        padding: 6px 14px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(56, 189, 248, 0.4);
        font-size: 11px;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: var(--text-muted);
      }

      .status-pill-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        margin-right: 8px;
        background: #22c55e;
        box-shadow: 0 0 12px rgba(34, 197, 94, 0.8);
      }

      .status-pill span:last-child {
        color: #e5e7eb;
        font-weight: 600;
      }

      .title-main {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 8px;
      }

      .subtitle {
        font-size: 13px;
        color: var(--text-muted);
        line-height: 1.5;
        margin-bottom: 18px;
      }

      .btn-row {
        margin-bottom: 18px;
      }

      .btn-primary {
        width: 100%;
        border: none;
        outline: none;
        border-radius: 999px;
        font-size: 17px;
        font-weight: 700;
        padding: 14px 18px;
        color: #f9fafb;
        background-image: linear-gradient(90deg, #0ea5e9, #22c55e);
        box-shadow: 0 18px 45px rgba(56, 189, 248, 0.45);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .btn-primary:active {
        transform: translateY(1px);
        box-shadow: 0 10px 28px rgba(56, 189, 248, 0.4);
      }

      .btn-dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.9),
          0 0 10px rgba(15, 23, 42, 0.9);
      }

      .output-shell {
        margin-top: 4px;
      }

      .output-label {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: var(--text-muted);
        margin-bottom: 6px;
      }

      .output-box {
        width: 100%;
        min-height: 120px;
        max-height: 420px;
        overflow: auto;
        border-radius: 18px;
        padding: 12px 10px 14px;
        background: radial-gradient(circle at top left, #020617 0, #000 70%);
        border: 1px solid rgba(15, 23, 42, 0.9);
        box-shadow: inset 0 0 0 1px rgba(30, 64, 175, 0.45);
      }

      pre {
        font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo,
          Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 11px;
        color: #e5e7eb;
        white-space: pre-wrap;
        word-break: break-word;
      }

      .footer-note {
        margin-top: 10px;
        font-size: 11px;
        color: var(--text-muted);
      }

      .footer-note a {
        color: #38bdf8;
        text-decoration: none;
      }
    </style>
  </head>

  <body>
    <div class="shell">
      <div class="header-title">Ultra Pro · Live Console</div>

      <div class="card">
        <div class="card-header-line">
          <div class="status-pill">
            <span class="status-pill-dot"></span>
            <span>AOIE · Engine Link</span>
          </div>
        </div>

        <h1 class="title-main">AOIE Engine – Live Hook</h1>
        <p class="subtitle">
          Tap the button below to fire a sample AOIE request against your
          BetSense backend and see the live engine response, exactly like the
          Ultra Pro console will use in production.
        </p>

        <div class="btn-row">
          <button id="btn-run-aoie-ultra" class="btn-primary">
            <span class="btn-dot"></span>
            <span>Run AOIE Engine</span>
          </button>
        </div>

        <div class="output-shell">
          <div class="output-label">AOIE response</div>
          <div class="output-box">
            <pre id="aoie-ultra-output">Tap “Run AOIE Engine” to start…</pre>
          </div>
        </div>

        <div class="footer-note">
          This Ultra Pro hook calls:
          <br />
          <code>https://betsense-backend.onrender.com/aoie/run</code>
        </div>
      </div>
    </div>

    <script>
      const AOIE_ULTRA_ENDPOINT =
        "https://betsense-backend.onrender.com/aoie/run";

      const SAMPLE_PAYLOAD = {
        matchId: "T-ARS-TOT-2025-TEST",
        market: "MAIN",
        odds: {
          home: 2.45,
          draw: 3.1,
          away: 2.9,
        },
      };

      const btnUltra = document.getElementById("btn-run-aoie-ultra");
      const outUltra = document.getElementById("aoie-ultra-output");

      function setOutput(message, isError = false) {
        if (isError) {
          outUltra.style.color = "#fca5a5";
        } else {
          outUltra.style.color = "#e5e7eb";
        }
        outUltra.textContent = message;
      }

      async function runAoieUltra() {
        setOutput("Running AOIE engine…");

        try {
          const res = await fetch(AOIE_ULTRA_ENDPOINT, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(SAMPLE_PAYLOAD),
          });

          if (!res.ok) {
            const text = await res.text();
            setOutput(
              [
                "Error reaching backend.",
                `Status: ${res.status}`,
                "",
                text || "Backend did not respond as expected.",
                "",
                "The Render free server may be waking up or unreachable right now.",
                "Try again in 5–10 seconds.",
              ].join("\n"),
              true
            );
            return;
          }

          const data = await res.json();
          setOutput(JSON.stringify(data, null, 2));
        } catch (err) {
          setOutput(
            [
              "Error reaching backend.",
              err.message || String(err),
              "",
              "The Render free server may be sleeping.",
              "Try again in 5–10 seconds.",
            ].join("\n"),
            true
          );
        }
      }

      btnUltra.addEventListener("click", runAoieUltra);
    </script>
  </body>
</html>
