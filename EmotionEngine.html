<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emotion Engine · BetSense AI</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #06131f;
      font-family: Arial, sans-serif;
      color: white;
    }

    .container {
      width: 90%;
      margin: auto;
      padding-top: 30px;
      padding-bottom: 40px;
    }

    .section-title {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 15px;
      opacity: 0.8;
      line-height: 1.6;
    }

    .badge-row {
      margin-top: 10px;
      margin-bottom: 25px;
    }

    .badge {
      display: inline-block;
      background: #0e2336;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      margin-right: 8px;
      border: 1px solid #1e3a5a;
    }

    .section-card {
      background: #0a1b2b;
      border-radius: 14px;
      padding: 20px;
      margin-top: 25px;
      border: 1px solid #15304a;
    }

    .field-label {
      font-size: 13px;
      opacity: 0.8;
      margin-bottom: 4px;
    }

    input {
      width: 100%;
      padding: 14px;
      border-radius: 10px;
      border: 1px solid #244663;
      background: #0f2438;
      color: white;
      font-size: 15px;
      margin-bottom: 15px;
    }

    .row-3 {
      display: flex;
      gap: 10px;
    }

    .row-3 > div {
      flex: 1;
    }

    .btn-primary {
      width: 100%;
      padding: 15px;
      background: linear-gradient(90deg, #37ff6b, #1ecb4f);
      border: none;
      border-radius: 40px;
      font-size: 18px;
      font-weight: bold;
      margin-top: 10px;
      color: #05101a;
    }

    .btn-secondary {
      width: 100%;
      padding: 14px;
      background: transparent;
      border: 2px solid #1ecb4f;
      border-radius: 40px;
      color: white;
      font-size: 17px;
      font-weight: bold;
      margin-top: 12px;
    }
  </style>

  <script>
    const EMOTION_API_BASE = "https://betsense-backend.onrender.com";

    async function runEmotion() {
      const fixture = document.getElementById("fixture").value;
      const home = document.getElementById("home").value;
      const away = document.getElementById("away").value;
      const crowdHeat = document.getElementById("crowdHeat").value;
      const pressureSwing = document.getElementById("pressureSwing").value;
      const shockRisk = document.getElementById("shockRisk").value;

      const params = new URLSearchParams();

      if (fixture.trim()) params.append("fixtureId", fixture.trim());
      if (home.trim()) params.append("homeTeam", home.trim());
      if (away.trim()) params.append("awayTeam", away.trim());
      if (crowdHeat.trim()) params.append("crowdHeat", crowdHeat.trim());
      if (pressureSwing.trim())
        params.append("pressureSwing", pressureSwing.trim());
      if (shockRisk.trim()) params.append("shockRisk", shockRisk.trim());

      const url =
        EMOTION_API_BASE +
        "/api/emotion/analyze" +
        (params.toString() ? "?" + params.toString() : "");

      try {
        const res = await fetch(url);
        const data = await res.json();
        alert(JSON.stringify(data, null, 2));
      } catch (error) {
        alert("Error connecting to Emotion Engine backend");
      }
    }

    async function checkEmotionHealth() {
      try {
        const res = await fetch(EMOTION_API_BASE + "/api/emotion/health");
        const data = await res.json();
        alert(JSON.stringify(data, null, 2));
      } catch (e) {
        alert("Emotion health check failed");
      }
    }

    function openLiveData() {
      window.location.href = "/LiveDataConnect.html";
    }

    function goBackGenius() {
      window.location.href = "/GeniusEngine.html";
    }
  </script>
</head>
<body>

  <div class="container">

    <!-- Top badge -->
    <div class="badge-row">
      <span class="badge">BETSENSE AI STACK · EMOTION LAYER</span>
    </div>

    <!-- Page title -->
    <div class="section-title">EMOTION ENGINE</div>

    <!-- Subtitle (با اشاره به LiveData Connect) -->
    <div class="subtitle">
      Real-time emotion and pressure index per match – combining crowd heat,
      pressure swings and shock risk into a single actionable band. Enterprise
      clients can plug their own licensed feeds into this layer via
      <strong>LiveData Connect</strong>.
    </div>

    <!-- Second badge -->
    <div class="badge-row">
      <span class="badge">FEED · LIVE SESSION RISK</span>
    </div>

    <!-- Main card -->
    <div class="section-card">

      <div class="section-title" style="font-size:22px;">EMOTION SNAPSHOT</div>
      <div class="subtitle" style="margin-bottom:16px;">
        Send a single-fixture snapshot to Emotion Engine and preview the demo
        index band. All metrics use 0–100 scales in this sandbox.
      </div>

      <div class="field-label">Fixture ID (optional)</div>
      <input id="fixture" placeholder="Example: 123456" />

      <div class="field-label">Home team (optional)</div>
      <input id="home" placeholder="Example: Arsenal" />

      <div class="field-label">Away team (optional)</div>
      <input id="away" placeholder="Example: Spurs" />

      <div class="field-label">Emotion metrics · 0–100</div>
      <div class="row-3">
        <div>
          <input id="crowdHeat" placeholder="Crowd heat · e.g. 70" />
        </div>
        <div>
          <input id="pressureSwing" placeholder="Pressure swings · e.g. 55" />
        </div>
        <div>
          <input id="shockRisk" placeholder="Shock risk · e.g. 80" />
        </div>
      </div>

      <button class="btn-primary" onclick="runEmotion()">
        Run Emotion Analyze
      </button>

      <button class="btn-secondary" onclick="checkEmotionHealth()">
        Check Emotion health
      </button>

      <button class="btn-secondary" onclick="openLiveData()">
        LiveData Connect
      </button>

      <button class="btn-secondary" onclick="goBackGenius()">
        Back to Genius Engine
      </button>
    </div>

  </div>

</body>
</html>
