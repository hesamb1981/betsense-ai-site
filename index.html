<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BetSense AI Suite ‚Äì Live Match Intelligence</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="BetSense AI Suite ‚Äì Quantum Engine, Emotion Engine, Ultra Edge Layer and AI Match Reports for sharper sports trading and betting intelligence."
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    :root {
      --bg-main: #020617;
      --bg-card: #020617;
      --bg-card-soft: #020617;
      --border-soft: #1e293b;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --accent-1: #38bdf8;
      --accent-2: #a855f7;
      --accent-3: #22c55e;
      --accent-4: #f97316;
      --danger: #f97316;
      --good: #22c55e;
      --chip-bg: #020617;
      --radius-lg: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 22px 60px rgba(0, 0, 0, 0.65);
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 40%, #020617 100%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    body {
      min-height: 100vh;
      padding: 24px 16px 40px;
    }

    @media (min-width: 768px) {
      body {
        padding: 32px 40px 60px;
      }
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 24px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-logo {
      width: 40px;
      height: 40px;
      border-radius: 16px;
      background: radial-gradient(circle at 0% 0%, #38bdf8, #8b5cf6);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 20px;
      box-shadow: 0 14px 35px rgba(56, 189, 248, 0.35);
    }

    .brand-text-title {
      font-size: 18px;
      font-weight: 600;
    }

    .brand-text-sub {
      font-size: 12px;
      color: var(--text-muted);
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: radial-gradient(circle at top left, #0f172a, #020617);
      font-size: 11px;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #4ade80;
      box-shadow: 0 0 0 6px rgba(34, 197, 94, 0.23);
    }

    .pill-live {
      border-radius: var(--radius-pill);
      padding: 6px 12px;
      background: rgba(34, 197, 94, 0.12);
      border: 1px solid rgba(34, 197, 94, 0.5);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      font-weight: 500;
    }

    main {
      display: grid;
      gap: 16px;
    }

    @media (min-width: 900px) {
      .hero-grid {
        display: grid;
        grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
        gap: 16px;
        align-items: flex-start;
      }
    }

    .card {
      border-radius: 24px;
      background: radial-gradient(circle at top left, #0b1220, #020617 55%);
      border: 1px solid rgba(30, 64, 175, 0.55);
      box-shadow: var(--shadow-soft);
      padding: 18px 18px 20px;
    }

    @media (min-width: 768px) {
      .card {
        padding: 20px 22px 22px;
      }
    }

    .card-soft {
      border-radius: 20px;
      background: radial-gradient(circle at top left, #020617, #020617 70%);
      border: 1px solid rgba(30, 64, 175, 0.4);
      box-shadow: 0 14px 35px rgba(15, 23, 42, 0.9);
      padding: 16px 16px 18px;
    }

    .muted {
      color: var(--text-muted);
      font-size: 13px;
      line-height: 1.55;
    }

    h1 {
      margin: 0 0 10px;
      font-size: 26px;
      line-height: 1.18;
    }

    @media (min-width: 768px) {
      h1 {
        font-size: 30px;
      }
    }

    .accent-word {
      background: linear-gradient(90deg, #38bdf8, #a855f7);
      -webkit-background-clip: text;
      color: transparent;
    }

    h2 {
      margin: 0 0 8px;
      font-size: 18px;
    }

    h3 {
      margin: 0 0 6px;
      font-size: 15px;
    }

    .btn-primary,
    .btn-outline {
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 13px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #38bdf8, #a855f7);
      color: white;
      box-shadow: 0 14px 30px rgba(56, 189, 248, 0.4);
    }

    .btn-outline {
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--text-main);
    }

    .btn-chip-toggle {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      font-size: 12px;
      padding: 6px 14px;
      background: radial-gradient(circle at top left, #020617, #020617 80%);
      color: var(--text-muted);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-chip-toggle.active {
      background: linear-gradient(135deg, #38bdf8, #a855f7);
      color: #ecfeff;
      border-color: transparent;
    }

    .pill-label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 11px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-muted);
    }

    .pill-label .dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }

    .pill-label.orange .dot {
      background: #fb923c;
    }

    .pill-label.blue .dot {
      background: #38bdf8;
    }

    .section-title {
      font-size: 15px;
      margin: 0 0 4px;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .tag {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--text-muted);
    }

    .metric-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    @media (min-width: 768px) {
      .metric-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    .metric {
      border-radius: 16px;
      padding: 10px 10px 9px;
      background: radial-gradient(circle at top left, #020617, #020617 80%);
      border: 1px solid rgba(30, 64, 175, 0.5);
    }

    .metric-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .metric-value {
      font-size: 18px;
      font-weight: 600;
    }

    .metric-value.small {
      font-size: 16px;
    }

    .metric-caption {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 12px;
    }

    @media (min-width: 900px) {
      .grid-2 {
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      }
    }

    .grid-stack {
      display: grid;
      gap: 12px;
    }

    .odds-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
    }

    .odds-pill {
      border-radius: 999px;
      padding: 6px 10px;
      background: radial-gradient(circle at top left, #020617, #020617 80%);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .odds-label {
      color: var(--text-muted);
    }

    .odds-value {
      font-weight: 600;
      font-size: 13px;
    }

    .prob-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
    }

    .prob-pill {
      border-radius: 14px;
      padding: 7px 9px;
      background: radial-gradient(circle at top left, #020617, #020617 80%);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 11px;
    }

    .prob-label {
      color: var(--text-muted);
    }

    .prob-value {
      font-weight: 600;
      margin-top: 3px;
    }

    .bar-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }

    .bar-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 3px;
    }

    .bar-track {
      position: relative;
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #020617, #020617 80%);
      overflow: hidden;
      border: 1px solid rgba(30, 64, 175, 0.6);
    }

    .bar-fill {
      position: absolute;
      inset: 0;
      transform-origin: left;
    }

    .bar-fill.home {
      background: linear-gradient(90deg, #22c55e, #4ade80);
    }

    .bar-fill.draw {
      background: linear-gradient(90deg, #38bdf8, #0ea5e9);
    }

    .bar-fill.away {
      background: linear-gradient(90deg, #f97316, #fb923c);
    }

    .timeline-label-row {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .api-box {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo,
        Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      padding: 10px 11px;
      border-radius: 14px;
      background: #020617;
      border: 1px solid rgba(30, 64, 175, 0.5);
      max-height: 220px;
      overflow: auto;
      white-space: pre;
    }

    footer {
      margin-top: 22px;
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
    }

    .stack-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .stack-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
    }

    @media (min-width: 768px) {
      .stack-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    .stack-pill {
      border-radius: 14px;
      padding: 7px 9px;
      background: #020617;
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 11px;
    }

    .stack-pill strong {
      display: block;
      font-size: 12px;
      margin-bottom: 2px;
    }

    .report-tabs {
      display: inline-flex;
      padding: 3px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid rgba(148, 163, 184, 0.5);
      margin-top: 4px;
      gap: 3px;
      flex-wrap: wrap;
    }

    .report-tab {
      border-radius: 999px;
      padding: 5px 11px;
      font-size: 11px;
      border: none;
      background: transparent;
      cursor: pointer;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .report-tab.active {
      background: linear-gradient(135deg, #38bdf8, #a855f7);
      color: white;
    }

    .report-body {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-main);
      line-height: 1.55;
    }

    .report-body p {
      margin: 0 0 6px;
    }

    .scenario-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    @media (max-width: 799px) {
      .scenario-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .scenario-meta {
      border-radius: 16px;
      padding: 10px 11px;
      background: #020617;
      border: 1px solid rgba(30, 64, 175, 0.6);
      font-size: 12px;
    }

    .scenario-tags {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .scenario-tag {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-muted);
    }

    .scenario-badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }

    .scenario-badge {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--text-muted);
    }

    .scenario-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .scenario-value {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .scenario-muted {
      font-size: 11px;
      color: var(--text-muted);
    }

    .scenario-cta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .scenario-pill {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-muted);
    }

    /* Ultra Edge Layer styles */
    .module-section {
      margin-top: 14px;
      border-radius: 22px;
      padding: 16px 16px 18px;
      background: radial-gradient(circle at top left, #020617, #020617 80%);
      border: 1px solid rgba(30, 64, 175, 0.6);
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.9);
    }

    .module-header h2 {
      margin: 0 0 4px;
      font-size: 17px;
    }

    .module-header p {
      margin: 0;
      font-size: 13px;
      color: var(--text-muted);
    }

    .module-grid {
      display: grid;
      gap: 10px;
      margin-top: 12px;
    }

    .module-grid-2 {
      grid-template-columns: minmax(0, 1fr);
    }

    .module-grid-3 {
      grid-template-columns: minmax(0, 1fr);
    }

    @media (min-width: 900px) {
      .module-grid-2 {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      }
      .module-grid-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .module-card {
      border-radius: 18px;
      padding: 12px 12px 14px;
      background: #020617;
      border: 1px solid rgba(30, 64, 175, 0.6);
    }

    .module-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .module-card-header h3 {
      margin: 0;
      font-size: 14px;
    }

    .module-card-lead {
      margin: 0 0 8px;
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .module-card-footer {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      padding: 4px 9px;
      font-size: 11px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-muted);
    }

    .pill.pill-accent {
      border-color: rgba(56, 189, 248, 0.6);
      color: #e0f2fe;
    }

    .pill.pill-meta {
      border-color: rgba(168, 85, 247, 0.7);
      color: #ede9fe;
    }

    .pill.pill-sim {
      border-color: rgba(249, 115, 22, 0.7);
      color: #ffedd5;
    }

    .pill.pill-emotion {
      border-color: rgba(34, 197, 94, 0.7);
      color: #dcfce7;
    }

    .metric-stack {
      font-size: 12px;
      color: var(--text-main);
      line-height: 1.55;
    }

    .metric-stack p {
      margin: 0 0 4px;
    }

    .ghost-button {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: transparent;
      color: var(--text-muted);
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .bullet-list {
      margin: 0;
      padding-left: 16px;
      font-size: 12px;
      color: var(--text-main);
    }

    .bullet-list li {
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="brand">
        <div class="brand-logo">B</div>
        <div>
          <div class="brand-text-title">BetSense AI Suite</div>
          <div class="brand-text-sub">
            Quantum Engine ¬∑ Live Match Intelligence Stack
          </div>
        </div>
      </div>
      <div class="chip-row">
        <div class="pill-live">
          <span class="chip-dot"></span>
          Backend running on Render
        </div>
      </div>
    </header>

    <main>
      <!-- HERO + SUITE OVERVIEW -->
      <section class="hero-grid">
        <div class="card">
          <div class="chip-row" style="margin-bottom: 10px;">
            <div class="chip">
              <span class="chip-dot"></span>
              Realtime demo ‚Äì static sample data
            </div>
            <div class="chip">
              Live engine wired to mock feed
            </div>
          </div>

          <h1>
            One suite.
            <span class="accent-word">Four unique engines</span>
            plus an Ultra Edge layer for live markets.
          </h1>
          <p class="muted" style="margin-bottom: 14px;">
            BetSense AI Suite connects BetSense Engine, Emotion Engine, Ultra
            Edge Layer and AI Match Reports into an operator-ready stack ‚Äî
            giving traders, partners and investors a single view of how your
            models already behave in live markets.
          </p>

          <div class="stack-label">Why this stack</div>
          <div class="stack-grid">
            <div class="stack-pill">
              <strong>4 integrated engines</strong>
              Engine ¬∑ Emotion ¬∑ Ultra Edge ¬∑ Reporting
            </div>
            <div class="stack-pill">
              <strong>API-first architecture</strong>
              Drop-in layer on top of your feed
            </div>
            <div class="stack-pill">
              <strong>Live-match analytics</strong>
              xG ¬∑ micro-moments ¬∑ edge tracking
            </div>
            <div class="stack-pill">
              <strong>Desks, boards &amp; investors</strong>
              Built for decision-makers, not hobby users
            </div>
          </div>

          <div
            style="
              display: flex;
              flex-wrap: wrap;
              gap: 10px;
              margin-top: 16px;
              align-items: center;
            "
          >
            <button class="btn-primary" onclick="scrollToId('engine')">
              Explore BetSense AI Suite ‚ö°
            </button>
            <button class="btn-outline" onclick="scrollToId('api')">
              Connect your live data (API)
            </button>
          </div>
        </div>

        <div class="card-soft" id="suite">
          <h2>Stack snapshot ‚Äì demo match</h2>
          <p class="muted" style="margin-bottom: 10px;">
            Single derby fixture, late home goal, liquidity high. All engines
            read the same moment in different ways.
          </p>

          <div class="tag-row">
            <span class="tag">EPL-2025-001</span>
            <span class="tag">Chelsea vs Arsenal (demo)</span>
            <span class="tag">Minute 72 ‚Äì home goal</span>
            <span class="tag">High-liquidity market</span>
          </div>

          <div style="margin-top: 12px;">
            <span class="pill-label blue">
              <span class="dot"></span> Engine ‚Äì xG &amp; live stats
            </span>
            <span class="pill-label">
              <span class="dot"></span> Emotion ‚Äì crowd &amp; social
            </span>
            <span class="pill-label orange">
              <span class="dot"></span> Ultra Edge ‚Äì market micro-structure
            </span>
          </div>

          <div class="metric-grid" style="margin-top: 14px;">
            <div class="metric">
              <div class="metric-label">Home win probability</div>
              <div class="metric-value" id="metricHomeProb">68% ‚Üí 74%</div>
              <div class="metric-caption">Pre 2.40 ¬∑ Post 1.70</div>
            </div>
            <div class="metric">
              <div class="metric-label">Emotion Index view</div>
              <div class="metric-value small" id="metricEmotion">
                Cautious ‚Üí Confident
              </div>
              <div class="metric-caption">
                Crowd surge, feeds flip with the goal.
              </div>
            </div>
            <div class="metric">
              <div class="metric-label">BetSense edge vs market</div>
              <div
                class="metric-value small"
                id="metricEdge"
                style="color: var(--good);"
              >
                +3.1% vs market
              </div>
              <div class="metric-caption">Edge window: 180s</div>
            </div>
            <div class="metric">
              <div class="metric-label">Risk stance</div>
              <div class="metric-value small" id="metricRisk">
                Comfortable, monitor comeback
              </div>
              <div class="metric-caption">Trading desk summary</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ENGINE + LIVE STATS + ODDS -->
      <section class="grid-2">
        <div class="card-soft" id="engine">
          <div
            style="
              display: flex;
              align-items: center;
              justify-content: space-between;
              gap: 8px;
              margin-bottom: 8px;
            "
          >
            <h2 style="margin-bottom: 2px;">BetSense Quantum Engine ‚Äì live demo</h2>
            <span class="pill-live">
              <span class="chip-dot"></span>
              Backend running on Render
            </span>
          </div>
          <p class="muted">
            One view for live xG, shots, dangerous possessions and corners from
            the current demo feed.
          </p>

          <div class="metric-grid" style="margin-top: 12px;">
            <div class="metric">
              <div class="metric-label">xG (home model)</div>
              <div class="metric-value" id="statXg">1.32</div>
              <div class="metric-caption">Model only, single fixture</div>
            </div>
            <div class="metric">
              <div class="metric-label">Shots on target</div>
              <div class="metric-value" id="statShotsOn">4</div>
              <div class="metric-caption">Home side pressure</div>
            </div>
            <div class="metric">
              <div class="metric-label">Dangerous attacks</div>
              <div class="metric-value" id="statDanger">28</div>
              <div class="metric-caption">Box entries &amp; big moves</div>
            </div>
            <div class="metric">
              <div class="metric-label">Corners</div>
              <div class="metric-value" id="statCorners">5</div>
              <div class="metric-caption">Sustained territory</div>
            </div>
          </div>

          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-top: 12px;
              flex-wrap: wrap;
              gap: 8px;
            "
          >
            <div class="muted" style="font-size: 11px;">
              Source: <strong>demo</strong> ¬∑ Demo payload (fallback)
            </div>
            <button class="btn-chip-toggle" onclick="refreshDemo()">
              ‚ü≥ Refresh snapshot
            </button>
          </div>
        </div>

        <div class="grid-stack">
          <div class="card-soft">
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 8px;
              "
            >
              <h2 class="section-title">Pre-match &amp; live odds</h2>
              <button class="btn-chip-toggle" onclick="refreshOdds()">
                ‚ü≥ Refresh
              </button>
            </div>
            <p class="muted">
              Market view before kick-off and in-play. When live data is
              unavailable, BetSense falls back to internal demo odds.
            </p>

            <div class="odds-row">
              <div class="odds-pill">
                <span class="odds-label">Home win</span>
                <span class="odds-value" id="oddsHome">1.85</span>
              </div>
              <div class="odds-pill">
                <span class="odds-label">Draw</span>
                <span class="odds-value" id="oddsDraw">3.20</span>
              </div>
              <div class="odds-pill">
                <span class="odds-label">Away win</span>
                <span class="odds-value" id="oddsAway">4.50</span>
              </div>
            </div>

            <div class="muted" style="font-size: 11px; margin-top: 8px;">
              API did not return real odds ‚Üí <strong>fallback to demo</strong>
              odds.
            </div>
          </div>

          <div class="card-soft" id="probabilities">
            <div
              style="
                display: flex;
                justify-content: space-between;
                gap: 8px;
                align-items: center;
              "
            >
              <h2 class="section-title">Win probabilities</h2>
              <button class="btn-chip-toggle" onclick="refreshProbabilities()">
                ‚ü≥ Refresh
              </button>
            </div>
            <p class="muted">
              Implied probabilities vs market, normalised to 100%. Perfect for
              visualising how the model reads the current match context.
            </p>

            <div class="prob-row">
              <div class="prob-pill">
                <div class="prob-label">Home win</div>
                <div class="prob-value" id="probHome">54%</div>
              </div>
              <div class="prob-pill">
                <div class="prob-label">Draw</div>
                <div class="prob-value" id="probDraw">24%</div>
              </div>
              <div class="prob-pill">
                <div class="prob-label">Away win</div>
                <div class="prob-value" id="probAway">22%</div>
              </div>
            </div>

            <div class="muted" style="font-size: 11px; margin-top: 8px;">
              Sum: 100% ¬∑ Demo probabilities (fallback) ¬∑ Output is illustrative
              only
            </div>
          </div>
        </div>
      </section>

      <!-- EMOTION ENGINE V1 (QUICK / DEEP) -->
      <section class="grid-2">
        <div class="card-soft" id="emotion-v1">
          <div
            style="
              display: flex;
              justify-content: space-between;
              gap: 8px;
              align-items: center;
              margin-bottom: 6px;
            "
          >
            <h2>Emotion Engine ‚Äì Quick &amp; Deep</h2>
            <span class="pill-label">
              <span class="dot"></span> AI output ¬∑ demo language
            </span>
          </div>
          <p class="muted" style="margin-bottom: 10px;">
            Turn live-match chaos into a narrative your traders, investors and
            marketing teams can act on in seconds.
          </p>

          <div style="display: flex; gap: 8px; margin-bottom: 10px;">
            <button
              id="btnQuickEmotion"
              class="btn-chip-toggle active"
              onclick="switchEmotionMode('quick')"
            >
              Quick Emotion
            </button>
            <button
              id="btnDeepEmotion"
              class="btn-chip-toggle"
              onclick="switchEmotionMode('deep')"
            >
              Deep Emotion
            </button>
          </div>

          <div id="emotionOutputQuick" class="card-soft">
            <div class="stack-label">Quick read: home confidence unlocks</div>
            <p class="muted" id="emotionQuickText">
              The late home goal snaps the market into a new regime. Home odds
              compress sharply while draw and away prices drift. Emotion Index
              sees a clear shift from nervous energy to confident momentum on
              the home side, with social and in-stadium signals amplifying the
              move rather than contradicting it.
            </p>
          </div>

          <div id="emotionOutputDeep" class="card-soft" style="display: none;">
            <div class="stack-label">Deep read: regime change confirmed</div>
            <p class="muted" id="emotionDeepText">
              Order-book depth shows buy interest clustered around the new home
              price, with little appetite to fade the move. Social feeds pivot
              from frustration to celebration, while in-stadium noise metrics
              spike and remain elevated. The engine flags a stable regime change
              rather than a transient spike ‚Äî risk teams can treat the new home
              probability as sticky unless a second goal or red card arrives.
            </p>
            <div class="tag-row" id="emotionDeepTags">
              <span class="tag">Regime break</span>
              <span class="tag">Sticky confidence</span>
              <span class="tag">Noisy retail sidelined</span>
            </div>
          </div>
        </div>

        <!-- PROBABILITY TIMELINE -->
        <div class="card-soft" id="timeline">
          <h2 class="section-title">Probability Timeline</h2>
          <p class="muted">
            Visualise how win probabilities evolve from 0' to 90' in a single
            match. In production, this runs directly on your live feed.
          </p>

          <div
            style="
              display: inline-flex;
              gap: 6px;
              margin-top: 8px;
              flex-wrap: wrap;
            "
          >
            <span class="tag">Balanced opener</span>
            <span class="tag">Home pressure</span>
            <span class="tag">Away comeback risk</span>
          </div>

          <div class="bar-row">
            <div>
              <div class="bar-label">Home win %</div>
              <div class="bar-track">
                <div
                  class="bar-fill home"
                  id="barHome"
                  style="transform: scaleX(0.74);"
                ></div>
              </div>
            </div>
            <div>
              <div class="bar-label">Draw %</div>
              <div class="bar-track">
                <div
                  class="bar-fill draw"
                  id="barDraw"
                  style="transform: scaleX(0.18);"
                ></div>
              </div>
            </div>
            <div>
              <div class="bar-label">Away win %</div>
              <div class="bar-track">
                <div
                  class="bar-fill away"
                  id="barAway"
                  style="transform: scaleX(0.08);"
                ></div>
              </div>
            </div>
          </div>

          <div class="timeline-label-row">
            <span>0'</span>
            <span>Late home goal, 72'</span>
            <span>90'</span>
          </div>

          <div class="muted" style="font-size: 11px; margin-top: 6px;">
            Mode: Balanced opener ‚Äì early swings are modest, model still
            respects all three outcomes until the late goal locks in home
            momentum.
          </div>
        </div>
      </section>

      <!-- EMOTION ENGINE V2 ‚Äì SCENARIO BUILDER -->
      <section class="card-soft" id="emotion-v2">
        <div
          style="
            display: flex;
            justify-content: space-between;
            gap: 8px;
            align-items: center;
          "
        >
          <h2>Emotion Engine V2 ‚Äì Execution-ready lens</h2>
          <button class="btn-chip-toggle" onclick="nextScenario()">
            üéØ Next scenario
          </button>
        </div>
        <p class="muted">
          Version 2 adds execution windows, risk posture and messaging cues on
          top of the raw Emotion Index ‚Äî built so traders, desks and marketing
          teams can all read the same moment in one glance.
        </p>

        <div class="scenario-grid">
          <div class="scenario-meta" id="scenarioMeta">
            <div class="scenario-badge-row">
              <span class="scenario-badge" id="scenarioKey">
                Key scenario: Derby match, late home goal, odds move from 2.40 to 1.70.
              </span>
            </div>

            <div class="scenario-label">Headline</div>
            <div class="scenario-value" id="scenarioHeadline">
              Home side turns pressure into a decisive advantage, with odds and
              market mood moving in sync.
            </div>

            <div class="scenario-label">Trading summary</div>
            <div class="scenario-muted" id="scenarioSummary">
              ‚Ä¢ BetSense Engine highlights a clear break in the probability
              trend after the key event.<br />
              ‚Ä¢ Price move is supported by volume and sentiment, not just
              retail noise.<br />
              ‚Ä¢ Risk position is comfortable but requires monitoring if a second
              goal arrives.
            </div>

            <div class="scenario-tags" id="scenarioTags">
              <span class="scenario-tag">Board-ready narrative</span>
              <span class="scenario-tag">Desk summary</span>
              <span class="scenario-tag">Post-match pack</span>
            </div>
          </div>

          <div class="scenario-meta">
            <div class="scenario-label">Execution engine view</div>
            <div class="scenario-value" id="scenarioExec">
              Trade window: 90‚Äì240 seconds after goal
            </div>
            <div class="scenario-muted" id="scenarioExecDetail">
              Market impact is strongest while crowd and social sentiment are
              still repricing the new reality. Engine suggests scaling in
              rather than all-in fills.
            </div>

            <div style="margin-top: 8px;">
              <div class="scenario-label">Communication cues</div>
              <div class="scenario-muted" id="scenarioComms">
                Desk can brief management as ‚Äúcontrolled exposure with positive
                skew‚Äù, while marketing frames the story as ‚Äúhome confidence
                finally pays off‚Äù.
              </div>
            </div>

            <div class="scenario-cta-row">
              <div class="scenario-pill" id="scenarioTone">
                Tone: Confident ¬∑ Not euphoric
              </div>
              <button class="btn-chip-toggle" onclick="nextScenario()">
                ‚Üª Shuffle scenario
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- ULTRA EDGE LAYER ‚Äì MARKET, LIQUIDITY & META-ODDS -->
      <section class="module-section" id="ultra-edge">
        <div class="module-header">
          <h2>Ultra Edge Layer ‚Äî Market, Liquidity &amp; Meta-Odds</h2>
          <p>
            A supra-enterprise layer built for desks who treat football as a
            <strong>live market</strong>, not just a sport. These models sit on
            top of the Emotion Index and BetSense Engine to create a
            <strong>category-defining stack</strong>.
          </p>
        </div>

        <div class="module-grid module-grid-2">
          <!-- 1. Market Psychology Engine -->
          <article class="module-card">
            <header class="module-card-header">
              <h3>Market Psychology Engine</h3>
              <span class="pill pill-live">Crowd vs Pro Money</span>
            </header>

            <p class="module-card-lead">
              Live narrative of how <strong>retail flows</strong> and
              <strong>professional money</strong> respond to the same event ‚Äî
              fear, greed, FOMO and exhaustion states in one lens.
            </p>

            <div id="psychology-output" class="metric-stack">
              <!-- Filled by JS -->
            </div>

            <footer class="module-card-footer">
              <div class="tag-row">
                <span class="chip">Sentiment regime</span>
                <span class="chip">Pro vs retail split</span>
                <span class="chip">Narrative engine</span>
              </div>
              <button id="psychology-shuffle" class="ghost-button">
                ‚ü≥ Shuffle scenario
              </button>
            </footer>
          </article>

          <!-- 2. Liquidity Heat Radar -->
          <article class="module-card">
            <header class="module-card-header">
              <h3>Liquidity Heat Radar</h3>
              <span class="pill pill-accent">Live risk map</span>
            </header>

            <p class="module-card-lead">
              Visualises <strong>where money is clustering</strong> through the
              game ‚Äî quiet pools, crowded trades and stress points for risk
              teams.
            </p>

            <div id="liquidity-output" class="metric-stack">
              <!-- Filled by JS -->
            </div>

            <footer class="module-card-footer">
              <div class="tag-row">
                <span class="chip">Order-book tone</span>
                <span class="chip">Stress pockets</span>
                <span class="chip">Edge density</span>
              </div>
              <button id="liquidity-shuffle" class="ghost-button">
                ‚ü≥ Shuffle scenario
              </button>
            </footer>
          </article>
        </div>

        <div class="module-grid module-grid-3">
          <!-- 3. Meta-Odds Engine -->
          <article class="module-card">
            <header class="module-card-header">
              <h3>Meta-Odds Engine</h3>
              <span class="pill pill-meta">Odds-of-Odds</span>
            </header>

            <p class="module-card-lead">
              A synthetic price built from <strong>all books + behaviour</strong>
              ‚Äî the closest thing to a &ldquo;true&rdquo; global odds line.
            </p>

            <div id="meta-odds-output" class="metric-stack">
              <!-- Filled by JS -->
            </div>

            <footer class="module-card-footer">
              <div class="tag-row">
                <span class="chip">Global line</span>
                <span class="chip">Compression</span>
                <span class="chip">Mispricing alert</span>
              </div>
              <button id="meta-odds-shuffle" class="ghost-button">
                ‚ü≥ Shuffle scenario
              </button>
            </footer>
          </article>

          <!-- 4. Orderbook Simulator -->
          <article class="module-card">
            <header class="module-card-header">
              <h3>Orderbook Simulator</h3>
              <span class="pill pill-sim">Next 30‚Äì120s</span>
            </header>

            <p class="module-card-lead">
              Light-touch simulation of how the
              <strong>virtual order-book</strong> can evolve after key moments ‚Äî
              base case, fade case and blow-off case.
            </p>

            <div id="orderbook-output" class="metric-stack">
              <!-- Filled by JS -->
            </div>

            <footer class="module-card-footer">
              <div class="tag-row">
                <span class="chip">Path analysis</span>
                <span class="chip">Fade vs follow</span>
                <span class="chip">Micro-structure</span>
              </div>
              <button id="orderbook-shuffle" class="ghost-button">
                ‚ü≥ Shuffle scenario
              </button>
            </footer>
          </article>

          <!-- 5. Emotion Drift Curve -->
          <article class="module-card">
            <header class="module-card-header">
              <h3>Emotion Drift Curve</h3>
              <span class="pill pill-emotion">0' ‚Üí 90'</span>
            </header>

            <p class="module-card-lead">
              Tracks how <strong>market emotion</strong> drifts over the full
              match ‚Äî from balanced openers to panic, capitulation or quiet
              control.
            </p>

            <div id="drift-output" class="metric-stack">
              <!-- Filled by JS -->
            </div>

            <footer class="module-card-footer">
              <div class="tag-row">
                <span class="chip">Regime shifts</span>
                <span class="chip">Drift vs shock</span>
                <span class="chip">Emotion bands</span>
              </div>
              <button id="drift-shuffle" class="ghost-button">
                ‚ü≥ Shuffle scenario
              </button>
            </footer>
          </article>
        </div>
      </section>

      <!-- AI MATCH REPORT + LIVE API HOOK -->
      <section class="grid-2">
        <div class="card-soft" id="reports">
          <h2>AI Match Report ‚Äî Simple &amp; Full</h2>
          <p class="muted">
            Generate management-ready or investor-ready match summaries in one
            click from the same live context. In production this connects
            directly to your reporting stack and PDF export.
          </p>

          <div style="margin-top: 8px; margin-bottom: 4px;">
            <div class="scenario-label">1. Define the report focus</div>
            <div class="scenario-value" id="reportFocus">
              Derby match, late goal for home side, odds move from 2.40 to
              1.70.
            </div>
          </div>

          <div>
            <div class="scenario-label">2. Choose report depth</div>
            <div class="report-tabs">
              <button
                id="tabSimple"
                class="report-tab active"
                onclick="switchReport('simple')"
              >
                Simple report ‚Äî 1-page summary
              </button>
              <button
                id="tabFull"
                class="report-tab"
                onclick="switchReport('full')"
              >
                Full report ‚Äî investor-level detail
              </button>
            </div>
          </div>

          <div class="report-body" id="reportBodySimple">
            <p>
              <strong>Key scenario.</strong> Home side finally converts
              sustained pressure into a late goal, with match odds moving from
              2.40 to 1.70 and implied probability from 41% to 59%.
            </p>
            <p>
              <strong>Headline.</strong> Market and momentum align as home goal
              locks in a new probability regime.
            </p>
            <p>
              <strong>Trading summary.</strong> BetSense Engine confirms the
              break in trend, Emotion Engine validates that sentiment supports
              the move, and Ultra Edge Layer shows no structural stress in
              liquidity. Desk treats the new home price as fair but keeps some
              capacity for a second goal or late away push.
            </p>
          </div>

          <div
            class="report-body"
            id="reportBodyFull"
            style="display: none;"
          >
            <p>
              <strong>Market micro-structure.</strong> Order-book depth
              thickens on the home side post-goal, with spreads tightening and
              passive liquidity refilling quickly. Retail flows follow
              professional money rather than front-running it.
            </p>
            <p>
              <strong>Sentiment stack.</strong> Fan audio, social text and
              price action all move in the same direction, producing a strong
              ‚Äúalignment score‚Äù on the Emotion Index. No material pockets of
              dissent or contrarian narratives are detected.
            </p>
            <p>
              <strong>Risk framing.</strong> From a board perspective, the
              position is ‚Äúcontrolled upside with capped downside‚Äù: exposure is
              meaningful but backed by data and sentiment. Scenario analysis
              shows only a narrow cluster of paths where the new price would be
              judged aggressive ex-post.
            </p>
            <p>
              <strong>Investor note.</strong> Over a season-long sample, this
              type of regime-change event has historically delivered a positive
              contribution to P&amp;L when managed with the same ruleset,
              strengthening confidence in the engine‚Äôs live-use readiness.
            </p>
          </div>
        </div>

        <div class="card-soft" id="api">
          <h2>Live API hook ‚Äî plug your feeds in</h2>
          <p class="muted">
            In production, the same views run directly on your live prices,
            stats and social data via a single API layer. This demo runs on
            static sample data plus a live mock engine, but the architecture is
            designed to sit on top of your existing stack.
          </p>

          <ul class="muted" style="font-size: 12px; padding-left: 18px;">
            <li>Trading teams and risk &amp; PnL desks</li>
            <li>Executive and investor reporting</li>
            <li>External partners and white-label clients</li>
          </ul>

          <p class="muted" style="font-size: 11px; margin-top: 8px;">
            For API documentation and pilot access, use the contact section
            below or the <strong>support@betsense.casino</strong> address.
          </p>

          <div class="api-box" id="apiSample">
POST /api/live-input
Content-Type: application/json
X-API-Key: YOUR_KEY_HERE

{
  "matchId": "EPL-2025-001",
  "minute": 72,
  "homeTeam": "Chelsea",
  "awayTeam": "Arsenal",
  "stats": {
    "shotsHome": 12,
    "shotsAway": 7,
    "xgHome": 2.1,
    "xgAway": 0.9
  },
  "marketOdds": {
    "homeWin": 1.70,
    "draw": 3.80,
    "awayWin": 5.40
  },
  "social": {
    "homeSentiment": 0.81,
    "awaySentiment": 0.32,
    "crowdNoise": 0.77
  }
}
          </div>
        </div>
      </section>
    </main>

    <footer>
      BetSense AI Suite ‚Äì demo environment. All numbers and narratives are
      illustrative only and do not constitute betting advice or an offer.
    </footer>
  </div>

  <script>
    // --- Demo data ---------------------------------------------------------
    const demoState = {
      stats: {
        xgHome: 1.32,
        shotsOn: 4,
        dangerous: 28,
        corners: 5,
      },
      odds: {
        home: 1.85,
        draw: 3.2,
        away: 4.5,
      },
      probs: {
        home: 54,
        draw: 24,
        away: 22,
      },
    };

    const scenarios = [
      {
        key: "Key scenario: Derby match, late home goal, odds move from 2.40 to 1.70.",
        headline:
          "Home side turns pressure into a decisive advantage, with odds and market mood moving in sync.",
        summary:
          "‚Ä¢ BetSense Engine highlights a clear break in the probability trend after the key event.\n" +
          "‚Ä¢ Price move is supported by volume and sentiment, not just retail noise.\n" +
          "‚Ä¢ Risk position is comfortable but requires monitoring if a second goal arrives.",
        tags: ["Board-ready narrative", "Desk summary", "Post-match pack"],
        exec: "Trade window: 90‚Äì240 seconds after goal",
        execDetail:
          "Market impact is strongest while crowd and social sentiment are still repricing the new reality. Engine suggests scaling in rather than all-in fills.",
        comms:
          "Desk can brief management as ‚Äúcontrolled exposure with positive skew‚Äù, while marketing frames the story as ‚Äúhome confidence finally pays off‚Äù.",
        tone: "Tone: Confident ¬∑ Not euphoric",
      },
      {
        key: "Key scenario: Away red card, price over-reacts before stabilising.",
        headline:
          "Market initially overshoots on the home side before discipline and depth pull prices back into a sustainable range.",
        summary:
          "‚Ä¢ Initial jump in home probability is sharper than historical patterns for similar events.\n" +
          "‚Ä¢ Secondary flows show professional money fading the first move.\n" +
          "‚Ä¢ Final fair price lands between the two extremes, with risk teams clipping peak exposure.",
        tags: ["Volatility control", "Intraday note", "Risk governance"],
        exec: "Trade window: 30‚Äì120 seconds after red card",
        execDetail:
          "Engine recommends partial profit-taking into the spike while keeping asymmetric upside if momentum continues.",
        comms:
          "Risk can describe the event as ‚Äúcontrolled de-risking during volatility spike‚Äù for board reports.",
        tone: "Tone: Calm ¬∑ Emphasis on discipline",
      },
      {
        key: "Key scenario: Quiet game, soft drift towards away side.",
        headline:
          "Lack of home threat slowly shifts the market‚Äôs centre of gravity without any single headline event.",
        summary:
          "‚Ä¢ BetSense Engine tracks a steady accumulation of small away edges.\n" +
          "‚Ä¢ Emotion Index remains muted ‚Äì no crowd panic, just growing impatience.\n" +
          "‚Ä¢ Edge is more about undervalued control than highlight-reel moments.",
        tags: ["Long-horizon alpha", "Coaching insight", "Pattern library"],
        exec: "Trade window: Entire 2nd half, size small but persistent",
        execDetail:
          "Engine recommends incremental positioning rather than large one-off trades, reflecting the slow-burn nature of the edge.",
        comms:
          "Analysts can frame this as ‚Äúcontrol-driven edge‚Äù in post-match reviews.",
        tone: "Tone: Patient ¬∑ Process-focused",
      },
    ];

    // Ultra Edge Layer ‚Äì scenarios for market, liquidity & meta-odds
    const ultraLayer = {
      psychology: [
        {
          label: "Home pressure turns into FOMO chase",
          crowdTone: "Retail buyers pile into home side after a flurry of shots.",
          proTone: "Professional money already long, now trimming into the surge.",
          regime: "Euphoria with controlled profit-taking",
          split: "Pro: 58% of volume ¬∑ Retail: 42%",
          cue: "Frame as disciplined edge, not casino rush.",
          tags: ["FOMO bid", "Smart-money trim", "Late buyers vulnerable"],
        },
        {
          label: "Anxious drift, no-one in control",
          crowdTone: "Retail flows flip between home and draw with every half-chance.",
          proTone: "Desks stay light, waiting for a genuine information shock.",
          regime: "Nervous stalemate",
          split: "Pro: 34% ¬∑ Retail: 66%",
          cue: "Messaging focuses on patience and selectivity.",
          tags: ["Choppy flow", "No conviction", "Stay selective"],
        },
        {
          label: "Quiet confidence, professionals accumulate",
          crowdTone: "Retail accounts bored, volume low on screen.",
          proTone: "Specialist accounts quietly build into away side edge.",
          regime: "Stealth accumulation",
          split: "Pro: 71% ¬∑ Retail: 29%",
          cue: "Highlight professional conviction against sleepy tape.",
          tags: ["Stealth build", "Low-noise edge", "Asymmetric upside"],
        },
      ],
      liquidity: [
        {
          label: "Liquidity clusters around home win",
          heat: "Home: High ¬∑ Draw: Medium ¬∑ Away: Thin",
          stress: "Risk sits in home clean-sheet and late equaliser paths.",
          pockets: "Tight spreads 1.60‚Äì1.75, air pockets above 1.80.",
          deskCue: "Clip peaks, leave room for momentum extension.",
          tags: ["Crowded home lane", "Air pockets", "Clip extremes"],
        },
        {
          label: "Flat tape, liquidity spread evenly",
          heat: "Home: Balanced ¬∑ Draw: Balanced ¬∑ Away: Balanced",
          stress: "Low structural stress, but optionality cheap.",
          pockets: "Order-book thick across the curve, no obvious pain point.",
          deskCue: "Use options market feel ‚Äî build low-stress structures.",
          tags: ["Low stress", "Optionality cheap", "Structure building"],
        },
        {
          label: "Liquidity vacuum after red card",
          heat: "Home: Spiky ¬∑ Draw: Thin ¬∑ Away: Dislocated",
          stress: "Book struggles to re-anchor fair price after shock.",
          pockets: "Gaps in depth 15‚Äì40 ticks wide on away side.",
          deskCue: "Scale carefully, avoid crossing full gaps in size.",
          tags: ["Vacuum", "Re-anchoring", "Depth gaps"],
        },
      ],
      metaOdds: [
        {
          label: "Global line compresses around BetSense view",
          marketOdds: "Home 1.85 ¬∑ Draw 3.20 ¬∑ Away 4.40",
          metaOdds: "Home 1.78 ¬∑ Draw 3.35 ¬∑ Away 4.75",
          signal:
            "Books slowly concede edge ‚Äî home implied probability migrates toward BetSense.",
          alert: "+2.9% structural edge vs blended market.",
          tags: ["Meta-convergence", "Edge still present", "Controlled size OK"],
        },
        {
          label: "Books over-react, meta-odds stay anchored",
          marketOdds: "Home 1.62 ¬∑ Draw 3.80 ¬∑ Away 6.20",
          metaOdds: "Home 1.88 ¬∑ Draw 3.45 ¬∑ Away 4.90",
          signal:
            "Retail chasing home; meta-line rejects full move, flashing fade risk.",
          alert: "Caution: crowd chase, not information.",
          tags: ["Over-reaction", "Fade candidate", "Crowd chase"],
        },
        {
          label: "Silent mispricing on the draw",
          marketOdds: "Home 2.10 ¬∑ Draw 3.85 ¬∑ Away 3.40",
          metaOdds: "Home 2.18 ¬∑ Draw 3.40 ¬∑ Away 3.55",
          signal:
            "Books under-price grindy draw scenarios; meta-line pulls fair back in.",
          alert: "Draw carry trade attractive for slow money.",
          tags: ["Carry edge", "Under-priced grind", "Slow-burn alpha"],
        },
      ],
      orderbook: [
        {
          label: "Base case ‚Äì controlled repricing",
          paths: [
            "First 30s: spreads widen, quotes chase new fair level.",
            "30‚Äì90s: depth rebuilds around tighter band, volatility cools.",
            "Beyond 90s: market trades within new, narrower corridor.",
          ],
          deskCue: "Scale fills as depth returns; avoid first swing.",
          tags: ["Rebuild depth", "Avoid first print", "Scale in"],
        },
        {
          label: "Fade case ‚Äì spike gets sold",
          paths: [
            "First 20s: quotes gap higher on home side after goal.",
            "20‚Äì60s: professional money leans against extreme prints.",
            "60‚Äì120s: price decays halfway back toward pre-event band.",
          ],
          deskCue: "Favour staged fading, keep powder for overshoot.",
          tags: ["Mean-reversion", "Professional fade", "Staged entries"],
        },
        {
          label: "Blow-off case ‚Äì second wave momentum",
          paths: [
            "First 15s: prints rip through visible offers.",
            "15‚Äì75s: crowd and quant momentum both chase.",
            "75‚Äì120s: volatility compresses but at much higher level.",
          ],
          deskCue: "Only trade if already long; avoid fresh shorts.",
          tags: ["Blow-off", "Momentum chase", "Risk of squeeze"],
        },
      ],
      drift: [
        {
          label: "Slow burn towards home control",
          stages: [
            "0'‚Äì25': Balanced opener, no dominant edge.",
            "25'‚Äì55': Home pressure builds quietly, xG tilts.",
            "55'‚Äì75': Emotion Index shifts from cautious to confident.",
            "75'‚Äì90': Market treats home as sticky favourite.",
          ],
          regime: "Gradual accumulation, low headline drama.",
          tags: ["Drift not shock", "Sticky favourite", "Process edge"],
        },
        {
          label: "Whipsaw then exhaustion",
          stages: [
            "0'‚Äì30': High-vol swings after early chances both sides.",
            "30'‚Äì60': Market tires of chasing every move.",
            "60'‚Äì80': Liquidity thins, only sharp money active.",
            "80'‚Äì90': Emotion Index flatlines despite late flurry.",
          ],
          regime: "From chaos to fatigue.",
          tags: ["Vol crush", "Tired tape", "Selective opportunity"],
        },
        {
          label: "Crowd panic into late capitulation",
          stages: [
            "0'‚Äì40': Nervous but orderly tape.",
            "40'‚Äì70': Missed chances and bookings spike frustration.",
            "70'‚Äì85': Retail capitulates, closing positions at poor prices.",
            "85'‚Äì90': Professionals harvest final mispricings.",
          ],
          regime: "Panic then professional clean-up.",
          tags: ["Capitulation", "Late alpha", "Emotion wash-out"],
        },
      ],
    };

    let scenarioIndex = 0;
    let activePsychology = 0;
    let activeLiquidity = 0;
    let activeMetaOdds = 0;
    let activeOrderbook = 0;
    let activeDrift = 0;

    // --- Helpers -----------------------------------------------------------
    function $(id) {
      return document.getElementById(id);
    }

    function scrollToId(id) {
      const el = $(id);
      if (el) {
        el.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }

    function refreshDemo() {
      demoState.stats.xgHome = +(1.2 + Math.random() * 0.4).toFixed(2);
      demoState.stats.shotsOn = 3 + Math.floor(Math.random() * 3);
      demoState.stats.dangerous = 24 + Math.floor(Math.random() * 8);
      demoState.stats.corners = 4 + Math.floor(Math.random() * 3);
      updateStatsView();
    }

    function refreshOdds() {
      const hBase = 1.7 + Math.random() * 0.25;
      const dBase = 3.1 + Math.random() * 0.4;
      const aBase = 4.2 + Math.random() * 0.6;
      demoState.odds.home = +hBase.toFixed(2);
      demoState.odds.draw = +dBase.toFixed(2);
      demoState.odds.away = +aBase.toFixed(2);
      updateOddsView();
    }

    function refreshProbabilities() {
      const home = 60 + Math.random() * 10;
      const draw = 15 + Math.random() * 10;
      const away = 100 - home - draw;
      demoState.probs.home = Math.round(home);
      demoState.probs.draw = Math.round(draw);
      demoState.probs.away = Math.max(5, Math.round(away));
      updateProbView();
      updateTimelineBars();
    }

    function updateStatsView() {
      if ($("statXg")) $("statXg").textContent = demoState.stats.xgHome;
      if ($("statShotsOn"))
        $("statShotsOn").textContent = demoState.stats.shotsOn;
      if ($("statDanger"))
        $("statDanger").textContent = demoState.stats.dangerous;
      if ($("statCorners"))
        $("statCorners").textContent = demoState.stats.corners;
    }

    function updateOddsView() {
      if ($("oddsHome")) $("oddsHome").textContent = demoState.odds.home.toFixed(2);
      if ($("oddsDraw")) $("oddsDraw").textContent = demoState.odds.draw.toFixed(2);
      if ($("oddsAway")) $("oddsAway").textContent = demoState.odds.away.toFixed(2);
    }

    function updateProbView() {
      if ($("probHome")) $("probHome").textContent = demoState.probs.home + "%";
      if ($("probDraw")) $("probDraw").textContent = demoState.probs.draw + "%";
      if ($("probAway")) $("probAway").textContent = demoState.probs.away + "%";
    }

    function updateTimelineBars() {
      const total =
        demoState.probs.home + demoState.probs.draw + demoState.probs.away || 1;
      const homeScale = demoState.probs.home / total;
      const drawScale = demoState.probs.draw / total;
      const awayScale = demoState.probs.away / total;

      if ($("barHome"))
        $("barHome").style.transform = "scaleX(" + homeScale.toFixed(2) + ")";
      if ($("barDraw"))
        $("barDraw").style.transform = "scaleX(" + drawScale.toFixed(2) + ")";
      if ($("barAway"))
        $("barAway").style.transform = "scaleX(" + awayScale.toFixed(2) + ")";
    }

    // --- Emotion V1 --------------------------------------------------------
    function switchEmotionMode(mode) {
      const quickBox = $("emotionOutputQuick");
      const deepBox = $("emotionOutputDeep");
      const btnQuick = $("btnQuickEmotion");
      const btnDeep = $("btnDeepEmotion");

      if (!quickBox || !deepBox || !btnQuick || !btnDeep) return;

      if (mode === "quick") {
        quickBox.style.display = "block";
        deepBox.style.display = "none";
        btnQuick.classList.add("active");
        btnDeep.classList.remove("active");
      } else {
        quickBox.style.display = "none";
        deepBox.style.display = "block";
        btnQuick.classList.remove("active");
        btnDeep.classList.add("active");
      }
    }

    // --- Emotion V2 scenarios ---------------------------------------------
    function applyScenario(s) {
      if (!s) return;
      if ($("scenarioKey")) $("scenarioKey").textContent = s.key;
      if ($("scenarioHeadline"))
        $("scenarioHeadline").textContent = s.headline;
      if ($("scenarioSummary"))
        $("scenarioSummary").innerHTML = s.summary.replace(/\n/g, "<br />");
      if ($("scenarioExec")) $("scenarioExec").textContent = s.exec;
      if ($("scenarioExecDetail"))
        $("scenarioExecDetail").textContent = s.execDetail;
      if ($("scenarioComms")) $("scenarioComms").textContent = s.comms;
      if ($("scenarioTone")) $("scenarioTone").textContent = s.tone;

      const tagContainer = $("scenarioTags");
      if (tagContainer) {
        tagContainer.innerHTML = "";
        s.tags.forEach((t) => {
          const span = document.createElement("span");
          span.className = "scenario-tag";
          span.textContent = t;
          tagContainer.appendChild(span);
        });
      }
    }

    function nextScenario() {
      scenarioIndex = (scenarioIndex + 1) % scenarios.length;
      applyScenario(scenarios[scenarioIndex]);
    }

    // --- Ultra Edge renders ------------------------------------------------
    function renderPsychology() {
      const box = document.getElementById("psychology-output");
      if (!box) return;
      const s = ultraLayer.psychology[activePsychology];

      box.innerHTML = `
        <p class="metric-label">${s.label}</p>
        <p><strong>Crowd tape:</strong> ${s.crowdTone}</p>
        <p><strong>Professional tape:</strong> ${s.proTone}</p>
        <p><strong>Regime:</strong> ${s.regime}</p>
        <p><strong>Flow split:</strong> ${s.split}</p>
        <p><strong>Comms cue:</strong> ${s.cue}</p>
        <p style="margin-top:0.75rem;"><strong>Tags:</strong> ${s.tags.join(" ¬∑ ")}</p>
      `;
    }

    function renderLiquidity() {
      const box = document.getElementById("liquidity-output");
      if (!box) return;
      const s = ultraLayer.liquidity[activeLiquidity];

      box.innerHTML = `
        <p class="metric-label">${s.label}</p>
        <p><strong>Heat:</strong> ${s.heat}</p>
        <p><strong>Stress:</strong> ${s.stress}</p>
        <p><strong>Depth pockets:</strong> ${s.pockets}</p>
        <p><strong>Desk cue:</strong> ${s.deskCue}</p>
        <p style="margin-top:0.75rem;"><strong>Tags:</strong> ${s.tags.join(" ¬∑ ")}</p>
      `;
    }

    function renderMetaOdds() {
      const box = document.getElementById("meta-odds-output");
      if (!box) return;
      const s = ultraLayer.metaOdds[activeMetaOdds];

      box.innerHTML = `
        <p class="metric-label">${s.label}</p>
        <p><strong>Market odds:</strong> ${s.marketOdds}</p>
        <p><strong>Meta-odds:</strong> ${s.metaOdds}</p>
        <p><strong>Signal:</strong> ${s.signal}</p>
        <p><strong>Alert:</strong> ${s.alert}</p>
        <p style="margin-top:0.75rem;"><strong>Tags:</strong> ${s.tags.join(" ¬∑ ")}</p>
      `;
    }

    function renderOrderbook() {
      const box = document.getElementById("orderbook-output");
      if (!box) return;
      const s = ultraLayer.orderbook[activeOrderbook];

      const pathList = s.paths
        .map((line) => `<li>${line}</li>`)
        .join("");

      box.innerHTML = `
        <p class="metric-label">${s.label}</p>
        <ul class="bullet-list">
          ${pathList}
        </ul>
        <p><strong>Desk cue:</strong> ${s.deskCue}</p>
        <p style="margin-top:0.75rem;"><strong>Tags:</strong> ${s.tags.join(" ¬∑ ")}</p>
      `;
    }

    function renderDrift() {
      const box = document.getElementById("drift-output");
      if (!box) return;
      const s = ultraLayer.drift[activeDrift];

      const stageList = s.stages
        .map((line) => `<li>${line}</li>`)
        .join("");

      box.innerHTML = `
        <p class="metric-label">${s.label}</p>
        <ul class="bullet-list">
          ${stageList}
        </ul>
        <p><strong>Regime:</strong> ${s.regime}</p>
        <p style="margin-top:0.75rem;"><strong>Tags:</strong> ${s.tags.join(" ¬∑ ")}</p>
      `;
    }

    // --- Reports -----------------------------------------------------------
    function switchReport(mode) {
      const bodySimple = $("reportBodySimple");
      const bodyFull = $("reportBodyFull");
      const tabSimple = $("tabSimple");
      const tabFull = $("tabFull");
      if (!bodySimple || !bodyFull || !tabSimple || !tabFull) return;

      if (mode === "simple") {
        bodySimple.style.display = "block";
        bodyFull.style.display = "none";
        tabSimple.classList.add("active");
        tabFull.classList.remove("active");
      } else {
        bodySimple.style.display = "none";
        bodyFull.style.display = "block";
        tabSimple.classList.remove("active");
        tabFull.classList.add("active");
      }
    }

    // --- Initial load ------------------------------------------------------
    document.addEventListener("DOMContentLoaded", () => {
      updateStatsView();
      updateOddsView();
      updateProbView();
      updateTimelineBars();
      applyScenario(scenarios[0]);
      switchEmotionMode("quick");
      switchReport("simple");

      // Ultra Edge initial render
      renderPsychology();
      renderLiquidity();
      renderMetaOdds();
      renderOrderbook();
      renderDrift();

      // Ultra Edge buttons
      const psychBtn = document.getElementById("psychology-shuffle");
      if (psychBtn) {
        psychBtn.addEventListener("click", () => {
          activePsychology =
            (activePsychology + 1) % ultraLayer.psychology.length;
          renderPsychology();
        });
      }

      const liqBtn = document.getElementById("liquidity-shuffle");
      if (liqBtn) {
        liqBtn.addEventListener("click", () => {
          activeLiquidity =
            (activeLiquidity + 1) % ultraLayer.liquidity.length;
          renderLiquidity();
        });
      }

      const metaBtn = document.getElementById("meta-odds-shuffle");
      if (metaBtn) {
        metaBtn.addEventListener("click", () => {
          activeMetaOdds =
            (activeMetaOdds + 1) % ultraLayer.metaOdds.length;
          renderMetaOdds();
        });
      }

      const obBtn = document.getElementById("orderbook-shuffle");
      if (obBtn) {
        obBtn.addEventListener("click", () => {
          activeOrderbook =
            (activeOrderbook + 1) % ultraLayer.orderbook.length;
          renderOrderbook();
        });
      }

      const driftBtn = document.getElementById("drift-shuffle");
      if (driftBtn) {
        driftBtn.addEventListener("click", () => {
          activeDrift =
            (activeDrift + 1) % ultraLayer.drift.length;
          renderDrift();
        });
      }
    });
  </script>
</body>
</html>
